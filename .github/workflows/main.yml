name: Android Build & Upload to Firebase

on:
  push:
    branches:
      - main  # Change to your target branch

jobs:
  build:
    name: Building and distributing app
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3

      - uses: actions/setup-java@v3
        with:
          distribution: 'temurin'
          java-version: '17'

      - name: Setup Gradle
        uses: gradle/gradle-build-action@v2

      - name: Make gradlew executable
        run: chmod +x ./gradlew

      - name: Execute Gradle command - assembleRelease
        run: ./gradlew assembleRelease

      - name: Upload Artifact to Firebase App Distribution
        uses: wzieba/Firebase-Distribution-Github-Action@v1
        with:
          appId: "1:775805000902:android:01b5284487f7c2ab03cbc7"
          serviceCredentialsFileContent: "\nMIIEvgIBADANBgkqhkiG9w0BAQEFAASCBKgwggSkAgEAAoIBAQCqVy4N8haRkWuD\niXCoWlX7GNbnMZ5FwNVlgz2lcwDNYkibnxTzaZNJ3bl21N/m3hy1GFzEACTT0lae\nYvJBqT81ybbwrMhEG6ME83PXsYJ5viNrYQtNGAxNwx3kNBOmY3hvUAbTuOhvuEgI\nIKpM828WrSL8Xc5XKluIcyX/dJfFIb/qheu2miq2YMKGcX/lKvuGnEkjz1TjA65J\nLP140pvBxWw/OxVF20IR1+lK13ZVoiTIDI03aAil8HPawL828S1xWcU5lmESVxUC\nESrG+rWX8882pWvb/d5FIeq59LuDJi0/nwzO0EfPmDL77M17m6ScpMdV80MdA2Cr\nNQDS5GmlAgMBAAECggEAKWs0XBi66x9ofJ3tQkpg8MLb8nBqszxNxzavxSyfC9Gz\npP98CSnpMgNTZvUhElJ8uX4YhGIikkzpWe7mSBf+sjX/oSrqMUFlFL2bs91KRA77\nLs90f4Ty7O+eM5CEHKfAL5TObCngftXY0f0bW8Wvg9yKjsHCfAhlJFsXaLOxebGy\n8AWbeiFLgtlvlftu6yx+dIzsRCnTN5yV8JuAFVeAKJJLDIi730XGtBaVlSccgKOC\n+lAw8+NagP9inSwkJJ00ZHRqT0T+loEFMKjpLPVlntY5bob42AJgGSWrzLRZ7tNz\n+IFgddeDnK8S8pjn61mWBZ4HISPv5UKBeYIjBWxo0QKBgQDdG/DYnxATb6f3vE0Q\n2zOUNtnCVni5GfiZusjkc1Hq3TUZrYEA3z17yjGoZHlPwCypEpjJTXI/towR6omp\nx1GdSwUjRQ6PKiqm2Gtb9yw2oYXfHvViEVVaG8uZ3T9647M9j4o//2bgY13icEY3\nRHEhm1wJNwYxsiUkhve30q4CqQKBgQDFOFwqSSCAxW75wZqE9SPN8tffHeK0BSDv\ngf1uzURDbSe5Er8X6TA0iNXqN/lA5NWtWgp/Jb182MZT32pVUkytRcfL8g07Z3ws\nNLb1qp2T1cOlpwTcvQH6q70RIp6TJxf2/WthseSlQskm/9E/GaeusJsqv34FEYql\nbgXmw4uInQKBgFWkBN1ifq+Ih96EqLTmskuuExoatBe933RrzHPv1sLJe0++zECy\nNvZDkohOok4peSLjeRo/TQkwg4BM/5UrBomODSdkEAeTpYGKQcsVKaLfXSLWsuSR\nIiYMrgeiknvexgYKGto+6nHvCuYx5oBxmgASVMuc7GFDRu+m9zvT9mJBAoGBALfp\nvfDk7r2G391ikLDqVXBJxMtY+D7+BV+0bdy06LKkCQYKmE848u4aqLlZZ0P/4c9d\nhypYzGKvWAuA7Y0RSVXQG+hxGavK7j3fDrr7VyU0k9VXci5Sx5S2MILZMN1y+GMo\nocmh9eGy7RhEOSJJz1gVcy2jE2awnAV3G2O9+NH1AoGBAMWqphSMWP+8UyKdDSpA\nHKcsa5+nRQvPhPeOVzt5ZDw92bp3BhRSAaocDL9ctkaPVYlQAMiH/bwePrJnEfoN\nomw6qSTJslOpn1qLtfwN/+DEkjF58pxGHRc05klUZk3uwX4owzT0BikPToVYrdZC\nrr+3nvZtoVX+bhJJP0rWiqCP\n"
          groups: testers
          file: app/release/app-release.apk
